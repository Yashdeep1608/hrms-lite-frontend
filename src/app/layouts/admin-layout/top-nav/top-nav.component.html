<!-- Top Navigation Bar -->
<div
  class="flex flex-wrap items-center justify-between px-4 py-2 bg-accent-100 dark:bg-accent-900 text-primary-900 dark:text-gray-50 shadow-sm"
>
  <!-- Left: Sidebar Toggle -->
  <div class="flex items-center">
    <button
      *ngIf="!isSidebarOpen || isMobileView"
      mat-icon-button
      aria-label="Toggle Sidebar"
      (click)="onToggleSidebar()"
      class="mr-2 text-gray-700 dark:text-gray-300 hover:text-accent-600 dark:hover:text-accent-400 transition"
    >
      <mat-icon>menu</mat-icon>
    </button>
  </div>

  <!-- Right: Actions -->
  <div class="flex items-center space-x-3">
    <!-- Desktop Actions -->
    <div class="hidden md:flex items-center space-x-3">
      <!-- Language -->
      <button
        id="languageButton"
        matTooltip="{{ 'language' | translate }}"
        mat-icon-button
        aria-label="Languages"
        class="relative text-gray-700 dark:text-gray-300 hover:text-accent-600 dark:hover:text-accent-400 transition"
      >
        <mat-icon>translate_indic</mat-icon>
      </button>

      <!-- Notifications -->
      <button
        id="notificationButton"
        matTooltip="{{ 'notifications' | translate }}"
        mat-icon-button
        aria-label="Notifications"
        class="relative text-gray-700 dark:text-gray-300 hover:text-accent-600 dark:hover:text-accent-400 transition"
      >
        <mat-icon
          matBadge="{{ unreadCount }}"
          matBadgeColor="warn"
          *ngIf="unreadCount > 0"
        >
          notifications
        </mat-icon>
        <mat-icon *ngIf="unreadCount === 0">notifications</mat-icon>
      </button>

      <!-- Support -->
      <button
        mat-icon-button
        id="supportButton"
        matTooltip="{{ 'support' | translate }}"
        aria-label="Help"
        class="text-gray-700 dark:text-gray-300 hover:text-accent-600 dark:hover:text-accent-400 transition"
      >
        <mat-icon>support_agent</mat-icon>
      </button>

      <!-- Profile -->
      <div
        id="profileAvatar"
        class="cursor-pointer"
      >
        <div
          class="w-10 h-10 rounded-full bg-primary-700 text-primary-100 flex items-center justify-center font-semibold text-md overflow-hidden"
        >
          <ng-container *ngIf="user?.profile_image; else fallbackAvatar">
            <img
              [src]="user.profile_image"
              alt="Profile"
              class="w-full h-full object-cover rounded-full"
            />
          </ng-container>
          <ng-template #fallbackAvatar>
            {{ getInitials(user?.first_name, user?.last_name) }}
          </ng-template>
        </div>
      </div>
    </div>

    <!-- Mobile Actions (Menu Button) -->
    <div class="md:hidden">
      <button
        mat-icon-button
        [matMenuTriggerFor]="mobileMenu"
        class="text-gray-700 dark:text-gray-300 hover:text-accent-600 dark:hover:text-accent-400 transition"
      >
        <mat-icon>more_vert</mat-icon>
      </button>
    </div>
  </div>

  <!-- Mobile Dropdown Menu -->
  <mat-menu #mobileMenu="matMenu">
    <button mat-menu-item>
      <mat-icon>translate_indic</mat-icon>
      <span>{{ "language" | translate }}</span>
    </button>
    <button mat-menu-item >
      <mat-icon>notifications</mat-icon>
      <span>{{ "notifications" | translate }}</span>
    </button>
    <button mat-menu-item >
      <mat-icon>support_agent</mat-icon>
      <span>{{ "support" | translate }}</span>
    </button>
  </mat-menu>
</div>
